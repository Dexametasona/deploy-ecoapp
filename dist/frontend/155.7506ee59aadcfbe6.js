"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[155],{4155:(M,d,i)=>{i.r(d),i.d(d,{GreenpointsModule:()=>w});var a=i(6814),u=i(8589),e=i(6689),s=i(95),p=i(9189),f=i(3519),g=i.n(f),Z=i(553),x=i(9862),_=i(9626);let v=(()=>{class r{constructor(t,o){this.http=t,this.tokenService=o,this.url=`${Z.N.apiUrl}/api/reciclaje`}save(t){return this.http.post(`${this.url}/save`,t)}get(){return this.http.get(`${this.url}/${this.tokenService.getDecodedToken()?.USER_ID}`)}static#e=this.\u0275fac=function(o){return new(o||r)(e.LFG(x.eN),e.LFG(_.B))};static#t=this.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var m=i(2213);let y=(()=>{class r{constructor(t,o,n){this.fb=t,this.recyclingService=o,this.validator=n,this.idPuntoVerde="",this.closeEmitter=new e.vpe(!1),this.successEmitter=new e.vpe(!0),this.form=this.fb.group({emailUsuario:["",[s.kI.required,p.Le]],descripcion:["",s.kI.required]})}onSubmit(){if(this.form.invalid)return this.form.markAllAsTouched();const t={...this.form.value,idPuntoVerde:this.idPuntoVerde};this.closeEmitter.emit(!0),this.recyclingService.save(t).subscribe({next:()=>{this.form.reset(),console.log("emitiendo"),this.successEmitter.emit(!0),console.log("emitido con \xe9xito")},error:o=>{console.error("Error:",o),g().fire({title:"Ha ocurrido un error...",text:o.error,icon:"error"})}})}get emailErrorMessage(){const t="emailUsuario";return this.hasError(t,"required")?"El email es requerido":this.hasError(t,"email")?"Ingresa un email v\xe1lido":""}get descriptionErrorMessage(){return this.hasError("descripcion","required")?"La descripci\xf3n es requerida":""}hasError(t,o){return this.validator.hasError(this.form,t,o)}static#e=this.\u0275fac=function(o){return new(o||r)(e.Y36(s.qu),e.Y36(v),e.Y36(p.X_))};static#t=this.\u0275cmp=e.Xpm({type:r,selectors:[["app-recycler-user-form"]],inputs:{idPuntoVerde:"idPuntoVerde"},outputs:{closeEmitter:"closeEmitter",successEmitter:"successEmitter"},decls:33,vars:3,consts:[[1,"space-y-2",3,"formGroup","ngSubmit"],["for","email"],["type","email","id","email","formControlName","emailUsuario",1,"info"],[1,"flex","items-center","gap-5"],[1,"flex","items-center","gap-2"],["type","radio","id","carton-papel"],["for","carton-papel"],["type","radio","id","vidrio"],["for","vidrio"],["type","radio","id","plastico"],["for","plastico"],["type","radio","id","metal"],["for","metal"],["for","description"],["type","text","id","description","formControlName","descripcion",1,"info"],[1,"pt-3","text-center"],["type","submit"]],template:function(o,n){1&o&&(e.TgZ(0,"form",0),e.NdJ("ngSubmit",function(){return n.onSubmit()}),e.TgZ(1,"div")(2,"label",1),e._uU(3,"Ingrese el correo del usuario"),e.qZA(),e._UZ(4,"input",2),e.TgZ(5,"strong"),e._uU(6),e.qZA()(),e.TgZ(7,"div",3)(8,"div",4),e._UZ(9,"input",5),e.TgZ(10,"label",6),e._uU(11,"Cart\xf3n y Papel"),e.qZA()(),e.TgZ(12,"div",4),e._UZ(13,"input",7),e.TgZ(14,"label",8),e._uU(15,"Vidrio"),e.qZA()(),e.TgZ(16,"div",4),e._UZ(17,"input",9),e.TgZ(18,"label",10),e._uU(19,"Pl\xe1stico"),e.qZA()(),e.TgZ(20,"div",4),e._UZ(21,"input",11),e.TgZ(22,"label",12),e._uU(23,"Metal"),e.qZA()()(),e.TgZ(24,"div")(25,"label",13),e._uU(26,"Ingrese una descripci\xf3n"),e.qZA(),e._UZ(27,"input",14),e.TgZ(28,"strong"),e._uU(29),e.qZA()(),e.TgZ(30,"div",15)(31,"app-button",16),e._uU(32,"Agregar y dar puntos"),e.qZA()()()),2&o&&(e.Q6J("formGroup",n.form),e.xp6(6),e.Oqu(n.emailErrorMessage),e.xp6(23),e.Oqu(n.descriptionErrorMessage))},dependencies:[m.r,s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u],styles:[".info[_ngcontent-%COMP%]{border-bottom:1px black solid;grid-column:span 2;width:100%;outline:none}"]})}return r})();const T=["modal"];let h=(()=>{class r{constructor(){this.idPuntoVerde=""}open(){this.modal.nativeElement.showModal()}close(){this.modal.nativeElement.close()}static#e=this.\u0275fac=function(o){return new(o||r)};static#t=this.\u0275cmp=e.Xpm({type:r,selectors:[["app-recycler-user-modal"]],viewQuery:function(o,n){if(1&o&&e.Gf(T,5),2&o){let c;e.iGM(c=e.CRH())&&(n.modal=c.first)}},inputs:{idPuntoVerde:"idPuntoVerde"},decls:8,vars:1,consts:[[1,"m-auto","bg-white","rounded-md","p-4","backdrop:bg-black","backdrop:bg-opacity-50"],["modal",""],[1,"relative"],[1,"absolute","-top-3","-left-3","w-10","hover:bg-green-200","rounded-full","ease-in-out","duration-500",3,"click"],["src","assets/img/close.svg","alt","close-icon"],[1,"text-center","mb-3","text-xl","font-bold"],[3,"idPuntoVerde","closeEmitter"]],template:function(o,n){1&o&&(e.TgZ(0,"dialog",0,1)(2,"div",2)(3,"button",3),e.NdJ("click",function(){return n.close()}),e._UZ(4,"img",4),e.qZA(),e.TgZ(5,"h4",5),e._uU(6," Agregar usuario reciclador "),e.qZA(),e.TgZ(7,"app-recycler-user-form",6),e.NdJ("closeEmitter",function(){return n.close()}),e.qZA()()()),2&o&&(e.xp6(7),e.Q6J("idPuntoVerde",n.idPuntoVerde))},dependencies:[y]})}return r})();var U=i(4693);function A(r,l){if(1&r){const t=e.EpF();e.TgZ(0,"article",11),e.NdJ("click",function(){const c=e.CHM(t).index,F=e.oxw();return e.KtG(F.handleSelected(c))}),e.TgZ(1,"header",6)(2,"span",7),e._uU(3,"add"),e.qZA()(),e.TgZ(4,"section",8)(5,"h3",9),e._uU(6),e.qZA(),e.TgZ(7,"small",12),e._uU(8),e.qZA()()()}if(2&r){const t=l.$implicit;e.ekj("active",t.selected),e.xp6(6),e.hij(" ",t.nombre," "),e.xp6(2),e.Oqu(t.direccion)}}function b(r,l){if(1&r&&(e.TgZ(0,"tr")(1,"td",28)(2,"span",29),e._uU(3,"person"),e.qZA(),e._uU(4),e.qZA(),e.TgZ(5,"td",30),e._uU(6),e.qZA(),e.TgZ(7,"td",30),e._uU(8),e.qZA(),e.TgZ(9,"td",30),e._uU(10),e.qZA(),e.TgZ(11,"td",31)(12,"span",32),e._uU(13,"add"),e.qZA(),e._uU(14," Otorgar EcoPuntos "),e.qZA()()),2&r){const t=l.$implicit;e.xp6(4),e.hij(" ",t.email," "),e.xp6(2),e.hij(" ",t.materialesRecibidos," "),e.xp6(2),e.hij(" ",t.descripcion," "),e.xp6(2),e.hij(" ",t.dia," ")}}function q(r,l){if(1&r){const t=e.EpF();e.TgZ(0,"section",2)(1,"header")(2,"h2",13),e._uU(3," Seleccionado: "),e.TgZ(4,"span",14),e._uU(5),e.qZA()()(),e.TgZ(6,"article",15)(7,"section",16)(8,"h2",17),e._uU(9,"Informaci\xf3n"),e.qZA(),e.TgZ(10,"div",18)(11,"span",19),e._uU(12,"Nombre"),e.qZA(),e.TgZ(13,"span",20),e._uU(14),e.qZA(),e.TgZ(15,"span",19),e._uU(16,"Tel\xe9fono"),e.qZA(),e.TgZ(17,"span",20),e._uU(18),e.qZA(),e.TgZ(19,"span",19),e._uU(20,"Horario de atenci\xf3n"),e.qZA(),e.TgZ(21,"span",20),e._uU(22),e.qZA(),e.TgZ(23,"span",19),e._uU(24,"D\xedas de atenci\xf3n"),e.qZA(),e.TgZ(25,"span",20),e._uU(26),e.qZA(),e.TgZ(27,"span",19),e._uU(28,"Materiales aceptados"),e.qZA(),e.TgZ(29,"span",20),e._uU(30),e.qZA(),e.TgZ(31,"span",19),e._uU(32,"Direcci\xf3n"),e.qZA(),e.TgZ(33,"span",20),e._uU(34),e.qZA()()(),e.TgZ(35,"section",16)(36,"h2",17),e._uU(37,"Premiar a los usuarios"),e.qZA(),e.TgZ(38,"div",21)(39,"div",22)(40,"table",23)(41,"thead")(42,"tr")(43,"th",24),e._uU(44,"Usuario"),e.qZA(),e.TgZ(45,"th",24),e._uU(46,"Tipo"),e.qZA(),e.TgZ(47,"th",24),e._uU(48,"Descripci\xf3n"),e.qZA(),e.TgZ(49,"th",24),e._uU(50,"Fecha"),e.qZA(),e.TgZ(51,"th",24),e._uU(52,"Acciones"),e.qZA()()(),e.TgZ(53,"tbody"),e.YNc(54,b,15,4,"tr",25),e.qZA()()(),e.TgZ(55,"app-button",26),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.recyclerUserModal.open())}),e._uU(56,"A\xf1adir usuario reciclador"),e.qZA()(),e.TgZ(57,"app-recycler-user-modal",27),e.NdJ("successEmitter",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.success())}),e.qZA()()()()}if(2&r){const t=e.oxw();e.xp6(5),e.Oqu(t.selectedGreenpoint.nombre),e.xp6(9),e.Oqu(t.selectedGreenpoint.nombre),e.xp6(4),e.Oqu(t.selectedGreenpoint.telefono),e.xp6(4),e.Oqu(t.selectedGreenpoint.horarioAtencion),e.xp6(4),e.Oqu(t.selectedGreenpoint.diasAtencion),e.xp6(4),e.Oqu(t.selectedGreenpoint.materialesAceptados),e.xp6(4),e.Oqu(t.selectedGreenpoint.direccion),e.xp6(20),e.Q6J("ngForOf",t.selectedGreenpoint.reciclajes),e.xp6(3),e.Q6J("idPuntoVerde",t.idPuntoVerde)}}const C=[{path:"",component:(()=>{class r{constructor(t){this.greenpointService=t,this.greenpoints=[],this.selectedGreenpoint=null,this.idPuntoVerde="",this.greenpointService.getAllGreenpoints().subscribe({next:o=>{console.log(o),this.greenpoints=o},error:o=>{console.log(o)}})}handleSelected(t){this.greenpoints.forEach((o,n)=>{o.selected=t===n,this.selectedGreenpoint=t===n?o:null}),this.idPuntoVerde=this.selectedGreenpoint?.puntoVerdeId}success(){console.log("inside the success method"),g().fire({title:"Registro exitoso",text:"El usuario ha sido registrado exitosamente",icon:"success"}),this.greenpointService.getAllGreenpoints().subscribe({next:t=>{this.greenpoints=t},error:t=>{console.error("Error",t)}})}static#e=this.\u0275fac=function(o){return new(o||r)(e.Y36(U.N))};static#t=this.\u0275cmp=e.Xpm({type:r,selectors:[["app-greenpoints"]],viewQuery:function(o,n){if(1&o&&e.Gf(h,5),2&o){let c;e.iGM(c=e.CRH())&&(n.recyclerUserModal=c.first)}},decls:15,vars:2,consts:[[1,"text-white","font-inter","text-3xl","font-bold"],[1,"text-white","font-inter","text-lg","font-semibold","my-8"],[1,"flex","flex-col","gap-5"],[1,"points"],["class","rounded-xl drop-shadow-lg bg-white max-w-[340px] hover:scale-[1.01] hover:cursor-pointer",3,"active","click",4,"ngFor","ngForOf"],[1,"rounded-lg","drop-shadow-lg","bg-white","max-w-[340px]","hover:scale-[1.01]","hover:cursor-pointer"],[1,"h-56","bg-[#d9d9d9]","flex","items-center","justify-center","rounded-tl-xl","rounded-tr-xl"],[1,"material-symbols-outlined","text-9xl","text-white"],[1,"px-3","py-4"],[1,"text-gray-800","text-xl","font-semibold"],["class","flex flex-col gap-5",4,"ngIf"],[1,"rounded-xl","drop-shadow-lg","bg-white","max-w-[340px]","hover:scale-[1.01]","hover:cursor-pointer",3,"click"],[1,"text-xs","text-gray-600"],[1,"font-semibold","text-gray-700","text-lg"],[1,"text-[#006c34]"],[1,"bg-[#656565]","rounded-xl","pt-5","pb-10","px-8","flex","flex-col","gap-12"],["role","region",1,"flex","flex-col","gap-2.5"],[1,"text-white","font-semibold","text-lg"],[1,"bg-white","p-4","rounded-xl","grid","grid-cols-3","gap-3"],[1,"font-semibold","text-gray-800","text-sm"],[1,"text-gray-600","text-sm","italic","col-span-2"],[1,"bg-white","p-4","rounded-xl"],[1,"overflow-x-auto"],[1,"w-full"],[1,"text-left","text-gray-600","py-2","px-5"],[4,"ngFor","ngForOf"],["type","button",1,"mt-6",3,"click"],[3,"idPuntoVerde","successEmitter"],[1,"flex","items-center","gap-1","py-2","px-5","text-gray-700","whitespace-nowrap"],[1,"material-symbols-outlined"],[1,"py-2","px-5","text-gray-700","whitespace-nowrap"],[1,"flex","items-center","gap-1","font-semibold","py-2","px-5","text-[#ffc107]","whitespace-nowrap"],[1,"material-symbols-outlined","bg-[#FFC107]","text-white","rounded-full"]],template:function(o,n){1&o&&(e.TgZ(0,"h2",0),e._uU(1,"Mis GreenPoint"),e.qZA(),e.TgZ(2,"span",1),e._uU(3,"Puntos creados"),e.qZA(),e.TgZ(4,"main",2)(5,"section",3),e.YNc(6,A,9,4,"article",4),e.TgZ(7,"article",5)(8,"header",6)(9,"span",7),e._uU(10,"add"),e.qZA()(),e.TgZ(11,"section",8)(12,"h3",9),e._uU(13,"Agregar punto verde"),e.qZA()()()(),e.YNc(14,q,58,9,"section",10),e.qZA()),2&o&&(e.xp6(6),e.Q6J("ngForOf",n.greenpoints),e.xp6(8),e.Q6J("ngIf",n.selectedGreenpoint))},dependencies:[a.sg,a.O5,m.r,h],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;padding-block:1rem;height:100%;background:url(/assets/img/stripe_dashboard.svg);background-repeat:no-repeat;background-size:contain cover;background-position:top right;padding-inline:1rem}@media screen and (min-width: 768px){[_nghost-%COMP%]{background-size:contain}}.active[_ngcontent-%COMP%]{border:3px solid #0FA24A;scale:1.01}.points[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(320px,1fr));gap:1.25rem}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-of-type(odd){background-color:#f7f7f7}"]})}return r})()}];let G=(()=>{class r{static#e=this.\u0275fac=function(o){return new(o||r)};static#t=this.\u0275mod=e.oAB({type:r});static#o=this.\u0275inj=e.cJS({imports:[u.Bz.forChild(C),u.Bz]})}return r})();var E=i(8524);let w=(()=>{class r{static#e=this.\u0275fac=function(o){return new(o||r)};static#t=this.\u0275mod=e.oAB({type:r});static#o=this.\u0275inj=e.cJS({imports:[a.ez,G,E.m,s.UX]})}return r})()}}]);