"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[328],{8328:(U,c,n)=>{n.r(c),n.d(c,{AwardModule:()=>Z});var i=n(6814),l=n(8589),g=n(3519),d=n.n(g),t=n(6689),u=n(9862),p=n(553),h=n(9626);let f=(()=>{class e{constructor(r,o){this.http=r,this.tokenService=o,this.URL=p.N.apiUrl+"/api/premio",this.URLPRIZE=p.N.apiUrl+"/canjes"}getAllPrizes(){return this.http.get(this.URL)}postPrize(r){const o=new u.WM({"Content-Type":"application/json",Authorization:`Bearer ${this.tokenService.getToken()}`});return this.http.post(`${this.URLPRIZE}/${r}`,null,{headers:o})}static#t=this.\u0275fac=function(o){return new(o||e)(t.LFG(u.eN),t.LFG(h.B))};static#e=this.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var m=n(3934);function x(e,a){if(1&e){const r=t.EpF();t.TgZ(0,"article",9)(1,"header",10),t._UZ(2,"img",11),t.qZA(),t.TgZ(3,"section",12)(4,"div",13)(5,"h3",14),t._uU(6),t.qZA(),t.TgZ(7,"small",15),t._uU(8),t.qZA(),t._UZ(9,"br"),t.TgZ(10,"small",16),t._uU(11),t.qZA()(),t.TgZ(12,"button",17),t.NdJ("click",function(){const y=t.CHM(r).$implicit,T=t.oxw(2);return t.KtG(T.redeemAward(y.premioId))}),t._uU(13,"Canjear"),t.qZA()()()}if(2&e){const r=a.$implicit;t.xp6(2),t.Q6J("src",r.imgUrl,t.LSH),t.xp6(4),t.Oqu(r.nombrePremio),t.xp6(2),t.hij("EcoPuntos requeridos: ",r.puntos,""),t.xp6(3),t.Oqu(r.descripcion)}}function w(e,a){if(1&e&&(t.TgZ(0,"section",7),t.YNc(1,x,14,4,"article",8),t.qZA()),2&e){const r=t.oxw();t.xp6(1),t.Q6J("ngForOf",r.awards)}}function v(e,a){1&e&&(t.TgZ(0,"div")(1,"p",18),t._uU(2,"No se encontraron premios."),t.qZA()())}const A=[{path:"",component:(()=>{class e{constructor(r,o,s){this.award=r,this.userService=o,this.tokenService=s,this.user=null,this.awards=[],this.selectedAwardId=null}ngOnInit(){this.getAwards(),this.getUserData()}getAwards(){this.award.getAllPrizes().subscribe({next:r=>{this.awards=r},error:r=>alert("Error al buscar los premios"+r)})}redeemAward(r){this.award.postPrize(r).subscribe(o=>{console.log("canjeo exitos",o),d().fire({title:"Felicidades",html:"Revisa tu correo para confirmar <br> \xa1Has ganado un premio!",icon:"success",confirmButtonText:"Recibido"}).then(()=>{this.getUserData()})},o=>{d().fire({title:"Operacion invalida",text:"No tienes los suficientes puntos, crea mas reciclaje para obtener mas puntos",icon:"error",confirmButtonText:"Ok"})})}getUserData(){const r=this.tokenService.getDecodedToken().USER_ID;this.userService.getUser(r).subscribe({next:o=>this.user=o,error:o=>console.log("error al obtener el usuario",o)})}static#t=this.\u0275fac=function(o){return new(o||e)(t.Y36(f),t.Y36(m.K),t.Y36(h.B))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-award"]],decls:10,vars:3,consts:[[1,"flex","justify-between","items-center"],[1,"text-white","font-inter","text-3xl","font-bold"],[1,"text-[#006C34]","font-bold","bg-white","py-2","px-4","rounded-xl"],[1,"text-white","font-inter","text-lg","font-semibold","my-8"],[1,"flex","flex-col","items-center","justify-center","gap-5","w-full"],["class","points flex flex-wrap gap-5 justify-center",4,"ngIf"],[4,"ngIf"],[1,"points","flex","flex-wrap","gap-5","justify-center"],["class","rounded-xl drop-shadow-lg bg-white w-[300px] hover:scale-[1.01] hover:cursor-pointer",4,"ngFor","ngForOf"],[1,"rounded-xl","drop-shadow-lg","bg-white","w-[300px]","hover:scale-[1.01]","hover:cursor-pointer"],[1,"h-56","bg-[#d9d9d9]","flex","items-center","justify-center","rounded-tl-xl","rounded-tr-xl"],["alt","Imagen del premio",1,"w-full","h-full","object-cover","rounded-tl-xl","rounded-tr-xl",3,"src"],[1,"px-3","py-4","flex","justify-between","bg-white","rounded-bl-xl","rounded-br-xl"],[1,"w-5/6"],[1,"text-gray-800","text-xl","font-semibold"],[1,"text-xs","font-bold","text-gray-800"],[1,"text-xs","text-gray-600"],[1,"bg-green-800","px-2","rounded-md","text-white","max-h-14",3,"click"],[1,"text-white"]],template:function(o,s){1&o&&(t.TgZ(0,"div",0)(1,"h2",1),t._uU(2," Premios "),t.qZA(),t.TgZ(3,"div",2),t._uU(4),t.qZA()(),t.TgZ(5,"h3",3),t._uU(6,"Canjea tus premios"),t.qZA(),t.TgZ(7,"main",4),t.YNc(8,w,2,1,"section",5),t.qZA(),t.YNc(9,v,3,0,"div",6)),2&o&&(t.xp6(4),t.hij(" Tus EcoPuntos: ",null==s.user?null:s.user.puntos,""),t.xp6(4),t.Q6J("ngIf",s.awards.length>0),t.xp6(1),t.Q6J("ngIf",0===s.awards.length))},dependencies:[i.sg,i.O5],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;padding-block:1rem;height:100%;background:url(/assets/img/stripe_dashboard.svg);background-repeat:no-repeat;background-size:contain cover;background-position:top right;padding-inline:1rem}@media screen and (min-width: 768px){[_nghost-%COMP%]{background-size:contain}}"]})}return e})()}];let b=(()=>{class e{static#t=this.\u0275fac=function(o){return new(o||e)};static#e=this.\u0275mod=t.oAB({type:e});static#r=this.\u0275inj=t.cJS({imports:[l.Bz.forChild(A),l.Bz]})}return e})(),Z=(()=>{class e{static#t=this.\u0275fac=function(o){return new(o||e)};static#e=this.\u0275mod=t.oAB({type:e});static#r=this.\u0275inj=t.cJS({imports:[i.ez,b]})}return e})()}}]);