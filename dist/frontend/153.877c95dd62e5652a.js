"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[153],{153:(T,p,o)=>{o.r(p),o.d(p,{PrincipalModule:()=>C});var h=o(6814),u=o(9310),t=o(4946),d=o(4693),r=o(95),m=o(9781);const g=["mapContainer"];let f=(()=>{class i{constructor(e){this.mapService=e,this.greenPoints=[],this.filters="",this.markers=[]}ngAfterViewInit(){this.mapService.createMap(this.mapContainer.nativeElement).then(e=>{this.map=e,this.greenPoints.forEach(n=>this.addMarkerToMap(n))})}ngOnChanges(e){e.greenPoints&&this.map&&this.greenPoints.forEach(n=>this.addMarkerToMap(n)),e.filters&&this.filterMarkers(this.filters)}addMarkerToMap(e){const s=parseFloat(e.latitud),a=parseFloat(e.longitud),c=this.mapService.createIcon("assets/img/custom-pinmap.svg"),l=this.mapService.createMarker([s,a],c),P=this.mapService.createContent(e);l.addTo(this.map).bindPopup(P).on("click",()=>l.openPopup()),this.markers.push(l)}filterMarkers(e){this.cleanMarkers(),"todos"!==e?this.greenPoints.filter(s=>s.materialesAceptados.includes(e)).forEach(s=>this.addMarkerToMap(s)):this.greenPoints.forEach(s=>this.addMarkerToMap(s))}cleanMarkers(){this.markers.forEach(e=>{e.remove()}),this.markers=[]}static#t=this.\u0275fac=function(n){return new(n||i)(t.Y36(m.S))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-customMap"]],viewQuery:function(n,s){if(1&n&&t.Gf(g,5),2&n){let a;t.iGM(a=t.CRH())&&(s.mapContainer=a.first)}},inputs:{greenPoints:"greenPoints",filters:"filters"},features:[t.TTD],decls:2,vars:0,consts:[[1,"map","w-full","h-full","bg-slate-300"],["mapContainer",""]],template:function(n,s){1&n&&t._UZ(0,"div",0,1)},styles:["[_nghost-%COMP%]{display:block;width:100%;height:100%}"]})}return i})();const M=[{path:"",component:(()=>{class i{constructor(e){this.greenpoint=e,this.greenpoints=[],this.filter="todos"}ngOnInit(){this.getGreenpoints()}getGreenpoints(){this.greenpoint.getAllGreenpoints().subscribe({next:e=>{console.log("get greenpoints",e),this.greenpoints=e},error:e=>console.error("ocurrio un error",{err:e})})}static#t=this.\u0275fac=function(n){return new(n||i)(t.Y36(d.N))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-principal"]],decls:20,vars:4,consts:[[1,"text-white","text-xl","font-bold","md:text-2xl","mb-2"],[1,"text-white"],[1,"appointment","text-end","mb-2"],[1,"filters","mb-2"],[1,"text-white","mr-2"],[1,"outline-none",3,"ngModel","ngModelChange"],["value","todos"],["value","METAL"],["value","PLASTICO"],["value","VIDRIO"],["value","PAPELCARTON"],[3,"greenPoints","filters"]],template:function(n,s){1&n&&(t.TgZ(0,"h2",0),t._uU(1),t.qZA(),t.TgZ(2,"p",1),t._uU(3," Aqu\xed encontraras los puntos de recepci\xf3n de desechos reciclables mas cerca de tu casa.\n"),t.qZA(),t._UZ(4,"div",2),t.TgZ(5,"div",3)(6,"span",4),t._uU(7,"Tipo de reciclaje:"),t.qZA(),t.TgZ(8,"select",5),t.NdJ("ngModelChange",function(c){return s.filter=c}),t.TgZ(9,"option",6),t._uU(10,"Todos"),t.qZA(),t.TgZ(11,"option",7),t._uU(12,"Metal"),t.qZA(),t.TgZ(13,"option",8),t._uU(14,"Pl\xe1stico"),t.qZA(),t.TgZ(15,"option",9),t._uU(16,"Vidrio"),t.qZA(),t.TgZ(17,"option",10),t._uU(18,"Papel y carton"),t.qZA()()(),t._UZ(19,"app-customMap",11)),2&n&&(t.xp6(1),t.hij(" Bienvenido ","Juanito Alima\xf1a",".\n"),t.xp6(7),t.Q6J("ngModel",s.filter),t.xp6(11),t.Q6J("greenPoints",s.greenpoints)("filters",s.filter))},dependencies:[r.YN,r.Kr,r.EJ,r.JJ,r.On,f],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;padding-block:1rem;height:100%;background:url(/assets/img/stripe_dashboard.svg);background-repeat:no-repeat;background-size:contain cover;background-position:top right;padding-inline:1rem}@media screen and (min-width: 768px){[_nghost-%COMP%]{background-size:contain}}"]})}return i})()}];let v=(()=>{class i{static#t=this.\u0275fac=function(n){return new(n||i)};static#e=this.\u0275mod=t.oAB({type:i});static#n=this.\u0275inj=t.cJS({imports:[u.Bz.forChild(M),u.Bz]})}return i})(),C=(()=>{class i{static#t=this.\u0275fac=function(n){return new(n||i)};static#e=this.\u0275mod=t.oAB({type:i});static#n=this.\u0275inj=t.cJS({imports:[h.ez,v,r.u5]})}return i})()}}]);