"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[437],{4437:(J,u,s)=>{s.r(u),s.d(u,{GreenpointsModule:()=>k});var p=s(6814),m=s(8589),e=s(6689),a=s(95),g=s(9850),f=s(9189),x=s(3519),d=s.n(x),Z=s(9542),h=s(2213),v=s(5152);function b(r,c){if(1&r&&(e.TgZ(0,"div",9),e._UZ(1,"input",10),e.TgZ(2,"label",11),e._uU(3),e.ALo(4,"typeFormat"),e.qZA()()),2&r){const t=c.$implicit;e.xp6(1),e.Q6J("id",t)("formControlName",t.toLowerCase())("value",t),e.xp6(1),e.Q6J("for",t),e.xp6(1),e.Oqu(e.lcZ(4,5,t))}}let y=(()=>{class r{constructor(t,o,n,i){this.fb=t,this.recyclingService=o,this.validator=n,this.staticData=i,this.materiales=[],this.idPuntoVerde="",this.closeEmitter=new e.vpe(!1),this.successEmitter=new e.vpe,this.form=this.fb.group({emailUsuario:["",[a.kI.required,f.Le]],plastico:[!1],papelcarton:[!1],vidrio:[!1],metal:[!1],descripcion:["",a.kI.required]}),this.materiales=this.staticData.recicledTypes}method(){const t=this.form.value,o=[];return t.plastico&&o.push("PLASTICO"),t.papelcarton&&o.push("PAPELCARTON"),t.vidrio&&o.push("VIDRIO"),t.metal&&o.push("METAL"),o}onSubmit(){if(this.form.invalid)return this.form.markAllAsTouched();const t={emailUsuario:this.form.value.emailUsuario,descripcion:this.form.value.descripcion,materialesRecibidos:this.method(),idPuntoVerde:this.idPuntoVerde};this.closeEmitter.emit(!0),this.recyclingService.save(t).subscribe({next:()=>{this.form.reset(),console.log("emitiendo"),this.successEmitter.emit(!0),console.log("emitido con \xe9xito")},error:o=>{console.error("Error:",o),d().fire({title:"Ha ocurrido un error...",text:o.error,icon:"error"})}})}get emailErrorMessage(){const t="emailUsuario";return this.hasError(t,"required")?"El email es requerido":this.hasError(t,"email")?"Ingresa un email v\xe1lido":""}get descriptionErrorMessage(){return this.hasError("descripcion","required")?"La descripci\xf3n es requerida":""}hasError(t,o){return this.validator.hasError(this.form,t,o)}static#e=this.\u0275fac=function(o){return new(o||r)(e.Y36(a.qu),e.Y36(Z.R),e.Y36(f.X_),e.Y36(g.X))};static#t=this.\u0275cmp=e.Xpm({type:r,selectors:[["app-recycler-user-form"]],inputs:{idPuntoVerde:"idPuntoVerde"},outputs:{closeEmitter:"closeEmitter",successEmitter:"successEmitter"},features:[e._Bn([g.X])],decls:18,vars:4,consts:[[1,"space-y-2",3,"formGroup","ngSubmit"],["for","email"],["type","email","id","email","formControlName","emailUsuario",1,"info"],[1,"flex","items-center","gap-5"],["class","flex items-center gap-2",4,"ngFor","ngForOf"],["for","description"],["type","text","id","description","formControlName","descripcion",1,"info"],[1,"pt-3","text-center"],["type","submit"],[1,"flex","items-center","gap-2"],["type","checkbox",3,"id","formControlName","value"],[3,"for"]],template:function(o,n){1&o&&(e.TgZ(0,"form",0),e.NdJ("ngSubmit",function(){return n.onSubmit()}),e.TgZ(1,"div")(2,"label",1),e._uU(3,"Ingrese el correo del usuario"),e.qZA(),e._UZ(4,"input",2),e.TgZ(5,"strong"),e._uU(6),e.qZA()(),e.TgZ(7,"div",3),e.YNc(8,b,5,7,"div",4),e.qZA(),e.TgZ(9,"div")(10,"label",5),e._uU(11,"Ingrese una descripci\xf3n"),e.qZA(),e._UZ(12,"input",6),e.TgZ(13,"strong"),e._uU(14),e.qZA()(),e.TgZ(15,"div",7)(16,"app-button",8),e._uU(17,"Agregar y dar puntos"),e.qZA()()()),2&o&&(e.Q6J("formGroup",n.form),e.xp6(6),e.Oqu(n.emailErrorMessage),e.xp6(2),e.Q6J("ngForOf",n.materiales),e.xp6(6),e.Oqu(n.descriptionErrorMessage))},dependencies:[p.sg,h.r,a._Y,a.Fj,a.Wl,a.JJ,a.JL,a.sg,a.u,v.Q],styles:[".info[_ngcontent-%COMP%]{border-bottom:1px black solid;grid-column:span 2;width:100%;outline:none}"]})}return r})();const T=["modal"];let _=(()=>{class r{constructor(){this.idPuntoVerde="",this.prueba=new e.vpe}open(){this.modal.nativeElement.showModal()}close(){this.modal.nativeElement.close()}sendPrueba(){this.prueba.emit(!0)}receivePrueba(t){this.sendPrueba()}static#e=this.\u0275fac=function(o){return new(o||r)};static#t=this.\u0275cmp=e.Xpm({type:r,selectors:[["app-recycler-user-modal"]],viewQuery:function(o,n){if(1&o&&e.Gf(T,5),2&o){let i;e.iGM(i=e.CRH())&&(n.modal=i.first)}},inputs:{idPuntoVerde:"idPuntoVerde"},outputs:{prueba:"prueba"},decls:8,vars:1,consts:[[1,"m-auto","bg-white","rounded-md","p-4","backdrop:bg-black","backdrop:bg-opacity-50"],["modal",""],[1,"relative"],[1,"absolute","-top-3","-left-3","w-10","hover:bg-green-200","rounded-full","ease-in-out","duration-500",3,"click"],["src","assets/img/close.svg","alt","close-icon"],[1,"text-center","mb-3","text-xl","font-bold"],[3,"idPuntoVerde","closeEmitter","successEmitter"]],template:function(o,n){1&o&&(e.TgZ(0,"dialog",0,1)(2,"div",2)(3,"button",3),e.NdJ("click",function(){return n.close()}),e._UZ(4,"img",4),e.qZA(),e.TgZ(5,"h4",5),e._uU(6," Agregar usuario reciclador "),e.qZA(),e.TgZ(7,"app-recycler-user-form",6),e.NdJ("closeEmitter",function(){return n.close()})("successEmitter",function(l){return n.receivePrueba(l)}),e.qZA()()()),2&o&&(e.xp6(7),e.Q6J("idPuntoVerde",n.idPuntoVerde))},dependencies:[y]})}return r})();var A=s(4693),U=s(8775),C=s(9751);function q(r,c){if(1&r){const t=e.EpF();e.TgZ(0,"article",12),e.NdJ("click",function(){const i=e.CHM(t).index,l=e.oxw();return e.KtG(l.handleSelected(i))}),e.TgZ(1,"button",13),e.NdJ("click",function(){const i=e.CHM(t).$implicit,l=e.oxw();return e.KtG(l.deleteGreenpoint(i.puntoVerdeId))}),e._UZ(2,"img",14),e.qZA(),e.TgZ(3,"header",6),e._UZ(4,"i",15),e.qZA(),e.TgZ(5,"section",8)(6,"h3",9),e._uU(7),e.qZA(),e.TgZ(8,"small",16),e._uU(9),e.qZA()()()}if(2&r){const t=c.$implicit;e.ekj("active",t.selected),e.xp6(7),e.hij(" ",t.nombre," "),e.xp6(2),e.Oqu(t.direccion)}}function w(r,c){if(1&r&&(e.TgZ(0,"tr")(1,"td",33)(2,"span",34),e._uU(3,"person"),e.qZA(),e._uU(4),e.qZA(),e.TgZ(5,"td",35),e._uU(6),e.ALo(7,"typeFormatArray"),e.qZA(),e.TgZ(8,"td",35),e._uU(9),e.qZA(),e.TgZ(10,"td",35),e._uU(11),e.qZA()()),2&r){const t=c.$implicit;e.xp6(4),e.hij(" ",t.email," "),e.xp6(2),e.hij(" ",e.lcZ(7,4,t.materialesRecibidos).join(", ")," "),e.xp6(3),e.hij(" ",t.descripcion," "),e.xp6(2),e.hij(" ",t.dia," ")}}function M(r,c){if(1&r){const t=e.EpF();e.TgZ(0,"section",17)(1,"header")(2,"h2",18),e._uU(3," Seleccionado: "),e.TgZ(4,"span",19),e._uU(5),e.qZA()()(),e.TgZ(6,"article",20)(7,"section",21)(8,"h2",22),e._uU(9,"Informaci\xf3n"),e.qZA(),e.TgZ(10,"div",23)(11,"span",24),e._uU(12,"Nombre"),e.qZA(),e.TgZ(13,"span",25),e._uU(14),e.qZA(),e.TgZ(15,"span",24),e._uU(16,"Tel\xe9fono"),e.qZA(),e.TgZ(17,"span",25),e._uU(18),e.qZA(),e.TgZ(19,"span",24),e._uU(20,"Horario de atenci\xf3n"),e.qZA(),e.TgZ(21,"span",25),e._uU(22),e.qZA(),e.TgZ(23,"span",24),e._uU(24,"D\xedas de atenci\xf3n"),e.qZA(),e.TgZ(25,"span",25),e._uU(26),e.qZA(),e.TgZ(27,"span",24),e._uU(28,"Materiales aceptados"),e.qZA(),e.TgZ(29,"span",25),e._uU(30),e.ALo(31,"typeFormatArray"),e.qZA(),e.TgZ(32,"span",24),e._uU(33,"Direcci\xf3n"),e.qZA(),e.TgZ(34,"span",25),e._uU(35),e.qZA()()(),e.TgZ(36,"section",21)(37,"h2",22),e._uU(38,"Historial de usuarios"),e.qZA(),e.TgZ(39,"div",26)(40,"div",27)(41,"table",28)(42,"thead")(43,"tr")(44,"th",29),e._uU(45,"Usuario"),e.qZA(),e.TgZ(46,"th",29),e._uU(47,"Tipo"),e.qZA(),e.TgZ(48,"th",29),e._uU(49,"Descripci\xf3n"),e.qZA(),e.TgZ(50,"th",29),e._uU(51,"Fecha"),e.qZA()()(),e.TgZ(52,"tbody"),e.YNc(53,w,12,6,"tr",30),e.qZA()()(),e.TgZ(54,"app-button",31),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.recyclerUserModal.open())}),e._uU(55,"A\xf1adir un reciclaje"),e.qZA()(),e.TgZ(56,"app-recycler-user-modal",32),e.NdJ("prueba",function(n){e.CHM(t);const i=e.oxw();return e.KtG(i.success(n))}),e.qZA()()()()}if(2&r){const t=e.oxw();e.xp6(5),e.Oqu(t.selectedGreenpoint.nombre),e.xp6(9),e.Oqu(t.selectedGreenpoint.nombre),e.xp6(4),e.Oqu(t.selectedGreenpoint.telefono),e.xp6(4),e.Oqu(t.selectedGreenpoint.horarioAtencion),e.xp6(4),e.Oqu(t.selectedGreenpoint.diasAtencion),e.xp6(4),e.Oqu(e.lcZ(31,9,t.selectedGreenpoint.materialesAceptados)),e.xp6(5),e.Oqu(t.selectedGreenpoint.direccion),e.xp6(18),e.Q6J("ngForOf",t.selectedGreenpoint.reciclajes),e.xp6(3),e.Q6J("idPuntoVerde",t.idPuntoVerde)}}function G(r,c){if(1&r){const t=e.EpF();e.TgZ(0,"app-modal-register-greenpoint",36),e.NdJ("closeModal",function(n){e.CHM(t);const i=e.oxw();return e.KtG(i.receiveModalStatus(n))}),e.qZA()}}const P=[{path:"",component:(()=>{class r{constructor(t){this.greenpointService=t,this.greenpoints=[],this.selectedGreenpoint=null,this.idPuntoVerde="",this.isShowModal=!1}ngOnInit(){this.getGreenpointsData()}getGreenpointsData(){this.greenpointService.getUserGreenpoints().subscribe({next:t=>{console.log("res: ",t),this.greenpoints=t},error:t=>{console.log(t)}})}receiveModalStatus(t){this.isShowModal=t}handleSelected(t){console.log(t),this.greenpoints.forEach((o,n)=>{o.selected=t===n}),this.selectedGreenpoint=this.greenpoints[t],this.idPuntoVerde=this.selectedGreenpoint?.puntoVerdeId}success(t){console.log("inside the success method"),d().fire({title:"Registro exitoso",text:"El usuario ha sido registrado exitosamente",icon:"success"}).then(()=>window.location.reload())}deleteGreenpoint(t){d().fire({icon:"question",title:"Seguro que deseas eliminar el greenpoint?",showCancelButton:!0,showConfirmButton:!0,confirmButtonColor:"red"}).then(o=>{o.isConfirmed&&this.greenpointService.deleteGreenpoint(t).subscribe({next:n=>{this.getGreenpointsData(),console.log("greenpoint eliminado",n)},error:n=>console.log("error al borrar el greenpoint",n)})})}showNewGreenPointModal(){alert("ajksd")}static#e=this.\u0275fac=function(o){return new(o||r)(e.Y36(A.N))};static#t=this.\u0275cmp=e.Xpm({type:r,selectors:[["app-greenpoints"]],viewQuery:function(o,n){if(1&o&&e.Gf(_,5),2&o){let i;e.iGM(i=e.CRH())&&(n.recyclerUserModal=i.first)}},decls:16,vars:3,consts:[[1,"text-white","font-inter","text-3xl","font-bold"],[1,"text-white","font-inter","text-lg","font-semibold","my-8"],[1,"flex","flex-col","items-center","justify-center","gap-5","w-full"],[1,"points","flex","flex-wrap","gap-5","justify-center"],["class","rounded-xl drop-shadow-lg bg-white w-[300px] hover:scale-[1.01] hover:cursor-pointer relative",3,"active","click",4,"ngFor","ngForOf"],[1,"rounded-lg","drop-shadow-lg","bg-white","w-[300px]","hover:scale-[1.01]","hover:cursor-pointer",3,"click"],[1,"h-56","bg-[#d9d9d9]","flex","items-center","justify-center","rounded-tl-xl","rounded-tr-xl"],[1,"material-symbols-outlined","text-9xl","text-white"],[1,"px-3","py-4"],[1,"text-gray-800","text-xl","font-semibold"],["class","flex flex-col gap-5 w-full",4,"ngIf"],[3,"closeModal",4,"ngIf"],[1,"rounded-xl","drop-shadow-lg","bg-white","w-[300px]","hover:scale-[1.01]","hover:cursor-pointer","relative",3,"click"],["type","button",1,"deleteBtn","overflow-hidden","absolute","right-2","top-2",3,"click"],["src","assets/img/delete.svg","alt","delete-icon",1,"w-8","aspect-square"],[1,"logo-ecoapp"],[1,"text-xs","text-gray-600"],[1,"flex","flex-col","gap-5","w-full"],[1,"font-semibold","text-gray-700","text-lg"],[1,"text-[#006c34]"],[1,"bg-[#656565]","rounded-xl","pt-5","pb-10","px-4","flex","flex-col","gap-12","w-full"],["role","region",1,"flex","flex-col","gap-2.5"],[1,"text-white","font-semibold","text-lg"],[1,"bg-white","p-4","rounded-xl","grid","grid-cols-3","gap-3"],[1,"font-semibold","text-gray-800","text-sm"],[1,"text-gray-600","text-sm","italic","col-span-2"],[1,"bg-white","p-4","rounded-xl"],[1,"w-full","overflow-x-scroll"],[1,"w-full"],[1,"text-left","text-gray-600","px-5","py-1"],[4,"ngFor","ngForOf"],["type","button",1,"mt-6",3,"click"],[3,"idPuntoVerde","prueba"],[1,"flex","items-center","gap-1","py-2","px-5","text-gray-700","whitespace-nowrap"],[1,"material-symbols-outlined"],[1,"py-2","px-5","text-gray-700","whitespace-nowrap"],[3,"closeModal"]],template:function(o,n){1&o&&(e.TgZ(0,"h2",0),e._uU(1,"Mis GreenPoint"),e.qZA(),e.TgZ(2,"span",1),e._uU(3,"Points creados"),e.qZA(),e.TgZ(4,"main",2)(5,"section",3),e.YNc(6,q,10,4,"article",4),e.TgZ(7,"article",5),e.NdJ("click",function(){return n.isShowModal=!0}),e.TgZ(8,"header",6)(9,"span",7),e._uU(10,"add"),e.qZA()(),e.TgZ(11,"section",8)(12,"h3",9),e._uU(13,"Agregar GreenPoint"),e.qZA()()()(),e.YNc(14,M,57,11,"section",10),e.qZA(),e.YNc(15,G,1,0,"app-modal-register-greenpoint",11)),2&o&&(e.xp6(6),e.Q6J("ngForOf",n.greenpoints),e.xp6(8),e.Q6J("ngIf",n.selectedGreenpoint),e.xp6(1),e.Q6J("ngIf",n.isShowModal))},dependencies:[p.sg,p.O5,h.r,U.J,_,C.L],styles:['@charset "UTF-8";[_nghost-%COMP%]{display:flex;flex-direction:column;padding-block:1rem;height:100%;overflow-x:scroll;background:url(/assets/img/stripe_dashboard.svg);background-repeat:no-repeat;background-size:contain cover;background-position:top right;padding-inline:1rem;max-width:100%}@media screen and (min-width: 768px){[_nghost-%COMP%]{background-size:contain}}.active[_ngcontent-%COMP%]{border:3px solid #0FA24A;scale:1.01}.logo-ecoapp[_ngcontent-%COMP%]{background-image:url(clip-path.a3488d66b15171c8.svg);width:8rem;height:8rem;background-repeat:no-repeat;background-size:contain}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-of-type(odd){background-color:#f7f7f7}.deleteBtn[_ngcontent-%COMP%]:hover{animation:_ngcontent-%COMP%_shake infinite linear .1s}.deleteBtn[_ngcontent-%COMP%]:hover   img[_ngcontent-%COMP%]{filter:drop-shadow(0 100px 0 #E84424);transform:translateY(-100px)}@keyframes _ngcontent-%COMP%_shake{0%{transform:rotate(10deg)}50%{transform:rotate(0)}to{transform:rotate(-10deg)}}']})}return r})()}];let E=(()=>{class r{static#e=this.\u0275fac=function(o){return new(o||r)};static#t=this.\u0275mod=e.oAB({type:r});static#o=this.\u0275inj=e.cJS({imports:[m.Bz.forChild(P),m.Bz]})}return r})();var F=s(8524),O=s(2931);let k=(()=>{class r{static#e=this.\u0275fac=function(o){return new(o||r)};static#t=this.\u0275mod=e.oAB({type:r});static#o=this.\u0275inj=e.cJS({imports:[p.ez,E,F.m,a.UX,O.DashboardModule]})}return r})()}}]);