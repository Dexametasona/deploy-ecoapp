"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[328],{8328:(y,c,i)=>{i.r(c),i.d(c,{AwardModule:()=>Z});var o=i(6814),l=i(8589),h=i(3519),d=i.n(h),t=i(6689),u=i(9862),p=i(553),g=i(9626);let m=(()=>{class e{constructor(n,r){this.http=n,this.tokenService=r,this.URL=p.N.apiUrl+"/api/premio",this.URLPRIZE=p.N.apiUrl+"/canjes"}getAllPrizes(){return this.http.get(this.URL)}postPrize(n){const r=new u.WM({"Content-Type":"application/json",Authorization:`Bearer ${this.tokenService.getToken()}`});return this.http.post(`${this.URLPRIZE}/${n}`,null,{headers:r})}static#t=this.\u0275fac=function(r){return new(r||e)(t.LFG(u.eN),t.LFG(g.B))};static#e=this.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var f=i(304);function w(e,a){if(1&e){const n=t.EpF();t.TgZ(0,"section")(1,"h3",7),t._uU(2,"Canjeas tus premios"),t.qZA(),t.TgZ(3,"article",8)(4,"div",9),t._UZ(5,"img",10),t.qZA(),t.TgZ(6,"div",11)(7,"div",12)(8,"h3",13),t._uU(9),t.qZA(),t.TgZ(10,"p",14),t._uU(11),t.qZA()(),t.TgZ(12,"button",15),t.NdJ("click",function(){const T=t.CHM(n).$implicit,C=t.oxw(2);return t.KtG(C.redeemAward(T.premioId))}),t._uU(13,"Canjear"),t.qZA()()()()}if(2&e){const n=a.$implicit;t.xp6(5),t.Q6J("src",n.imgUrl,t.LSH),t.xp6(4),t.Oqu(n.nombrePremio),t.xp6(2),t.hij("Puntos requeridos: ",n.puntos," ")}}function x(e,a){if(1&e&&(t.TgZ(0,"section",5),t.YNc(1,w,14,3,"section",6),t.qZA()),2&e){const n=t.oxw();t.xp6(1),t.Q6J("ngForOf",n.awards)}}function v(e,a){1&e&&(t.TgZ(0,"div")(1,"p",16),t._uU(2,"No se encontraron premios."),t.qZA()())}const A=[{path:"",component:(()=>{class e{constructor(n,r){this.award=n,this.authService=r,this.user=null,this.awards=[],this.selectedAwardId=null}ngOnInit(){this.getAwards(),this.authService.userLogged$.subscribe(n=>this.user=n)}getAwards(){this.award.getAllPrizes().subscribe({next:n=>{this.awards=n},error:n=>alert("Error al buscar los premios"+n)})}redeemAward(n){this.award.postPrize(n).subscribe(r=>{d().fire({title:"Felicidades",html:"Revisa tu correo para confirmar <br> \xa1Has ganado un premio!",icon:"success",confirmButtonText:"Recibido"})},r=>{d().fire({title:"Operacion invalida",text:"No tienes los suficientes puntos, crea mas reciclaje para obtener mas puntos",icon:"error",confirmButtonText:"Ok"})})}static#t=this.\u0275fac=function(r){return new(r||e)(t.Y36(m),t.Y36(f.e))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-award"]],decls:7,vars:3,consts:[[1,"flex","justify-between","items-center"],[1,"text-white","font-inter","text-3xl","font-bold","mb-5"],[1,"text-white","font-bold","text-2xl","bg-yellow-400","p-2","rounded-xl"],["class","grid grid-cols-1 lg:grid-cols-3 gap-4 lg:gap-8 z-30 my-3",4,"ngIf"],[4,"ngIf"],[1,"grid","grid-cols-1","lg:grid-cols-3","gap-4","lg:gap-8","z-30","my-3"],[4,"ngFor","ngForOf"],[1,"text-white","mb-4","lg:mb-10","px-3"],[1,"shadow","bg-white","lg:h-[10rem]","h-44"],[1,"w-full","h-full","bg-[#656565]"],["alt","Imagen del premio",1,"w-full","h-full","object-cover",3,"src"],[1,"flex","justify-between","p-3","bg-white"],[1,"w-5/6"],[1,"font-bold"],[1,"truncate","w-[200px]"],[1,"bg-green-800","px-2","rounded-md","text-white",3,"click"],[1,"text-white"]],template:function(r,s){1&r&&(t.TgZ(0,"div",0)(1,"h2",1),t._uU(2," Premios "),t.qZA(),t.TgZ(3,"div",2),t._uU(4),t.qZA()(),t.YNc(5,x,2,1,"section",3),t.YNc(6,v,3,0,"div",4)),2&r&&(t.xp6(4),t.hij(" Tus puntos: ",null==s.user?null:s.user.puntos,""),t.xp6(1),t.Q6J("ngIf",s.awards.length>0),t.xp6(1),t.Q6J("ngIf",0===s.awards.length))},dependencies:[o.sg,o.O5],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;padding-block:1rem;height:100%;background:url(/assets/img/stripe_dashboard.svg);background-repeat:no-repeat;background-size:contain cover;background-position:top right;padding-inline:1rem}@media screen and (min-width: 768px){[_nghost-%COMP%]{background-size:contain}}"]})}return e})()}];let b=(()=>{class e{static#t=this.\u0275fac=function(r){return new(r||e)};static#e=this.\u0275mod=t.oAB({type:e});static#n=this.\u0275inj=t.cJS({imports:[l.Bz.forChild(A),l.Bz]})}return e})(),Z=(()=>{class e{static#t=this.\u0275fac=function(r){return new(r||e)};static#e=this.\u0275mod=t.oAB({type:e});static#n=this.\u0275inj=t.cJS({imports:[o.ez,b]})}return e})()}}]);